@{
    ViewBag.Title = "Tablero";
}

<canvas id="c" width="900" height="400" style="border: 1px #000 solid; cursor: pointer; background-color: black;"></canvas>
<div id="log" style="width:200px; max-height:90px; overflow:scroll;"></div>
@section scripts
{
    <script src="~/Scripts/Tablero.js"></script>
    <script src="~/Scripts/jquery.signalR-2.0.1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <script>

        var tableroHub = $.connection.tableroHub;
        tableroHub.client.hello = function(received) {
            
        };

        tableroHub.client.createNewTablero = function(received) {
            tablero.createNew(900, 400, 'c');
        };
        
        tableroHub.client.startPaint = function (x, y) {
            
            tablero.startPaint(x, y);
        };
        
        tableroHub.client.endPaint = function () {
            
            tablero.endPaint();
        };
        
        tableroHub.client.draw = function (x, y) {
            
            tablero.draw(x,y);
        };

        tableroHub.client.changeColor = function (color) {
            tablero.changeColor(color);
        };


        $.connection.hub.start().done(function() {
            
            ////tableroHub.server.hello('hello world!');
            //tablero.onMouseDown = function (x, y) {

            //    tableroHub.server.startPaint(x, y);
            //};
            //tablero.onMouseMove = function (x, y) {
            //    tableroHub.server.draw(x, y);
            //};

            //tablero.onMouseUp = function() {
            //    tableroHub.server.endPaint();
            //};
        });

        //var tablero;
        $(function () {

            var tablero = $('#c').Tablero();
            console.log(tablero);

            //tablero = new Tablero('c');
            //var counter = 0;

            ////prevent scrolling
            //document.body.addEventListener('touchmove', function (event) {
            //    event.preventDefault();
            //}, false);

            //$('.color').click(function () {
            //    var color = $(this).find('i').css('color');
            //    tablero.changeColor(color);
            //    tableroHub.server.changeColor(color);
            //});

            //$('.reset').click(function() {
            //    tablero.createNew(900, 400, 'c');
            //    tableroHub.server.createNewTablero();
            //});
        });
    </script>
}
